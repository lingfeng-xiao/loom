# Git 规范

## 1. 分支管理

### 1.1 分支类型
- **main**：主分支，用于发布生产版本
- **develop**：开发分支，集成所有功能开发
- **feature/**：功能分支，用于开发新功能
- **bugfix/**：bug 修复分支，用于修复 bug
- **release/**：发布分支，用于准备发布版本
- **hotfix/**：热修复分支，用于紧急修复生产问题

### 1.2 分支命名规范
- 分支名称使用小写字母、数字和连字符
- 功能分支：`feature/功能名称`
- Bug 修复分支：`bugfix/问题描述`
- 发布分支：`release/版本号`
- 热修复分支：`hotfix/问题描述`

## 2. Commit 消息规范

### 2.1 Commit 消息格式
```
<类型>(<范围>): <描述>

[可选的正文]

[可选的脚注]
```

### 2.2 类型
- **feat**：新功能
- **fix**：修复 bug
- **docs**：文档更新
- **style**：代码风格调整（不影响功能）
- **refactor**：代码重构
- **test**：测试相关
- **chore**：构建、依赖等其他修改

### 2.3 范围
- 可选，用于指定修改的范围，如模块、文件等
- 例如：`feat(auth): 添加登录功能`

### 2.4 描述
- 简短描述，不超过 50 个字符
- 使用祈使句，现在时态
- 首字母小写，结尾不加句号

### 2.5 正文
- 可选，详细描述修改内容
- 每行不超过 72 个字符
- 解释修改的原因和实现方式

### 2.6 脚注
- 可选，用于引用 issue 或 PR
- 例如：`Fixes #123` 或 `Closes #456`

## 3. 代码提交流程

### 3.1 开发流程
1. 从 develop 分支创建 feature 分支
2. 在 feature 分支上进行开发
3. 开发完成后，提交 Pull Request 到 develop 分支
4. 代码审查通过后，合并到 develop 分支
5. 删除 feature 分支

### 3.2 发布流程
1. 从 develop 分支创建 release 分支
2. 在 release 分支上进行测试和修复
3. 准备发布版本，更新版本号和 CHANGELOG
4. 提交 Pull Request 到 main 分支
5. 代码审查通过后，合并到 main 分支
6. 在 main 分支上创建标签（tag）
7. 删除 release 分支

### 3.3 热修复流程
1. 从 main 分支创建 hotfix 分支
2. 在 hotfix 分支上进行修复
3. 提交 Pull Request 到 main 和 develop 分支
4. 代码审查通过后，合并到 main 和 develop 分支
5. 在 main 分支上创建标签（tag）
6. 删除 hotfix 分支

## 4. 代码审查规范

### 4.1 Pull Request 规范
- 每个 Pull Request 应该只包含一个功能或修复
- 标题清晰描述修改内容
- 正文详细说明修改的原因和实现方式
- 关联相关的 issue
- 确保所有测试通过

### 4.2 代码审查要点
- 代码质量和风格
- 功能正确性
- 安全性
- 性能
- 可读性和可维护性

## 5. 标签（Tag）规范

### 5.1 版本号格式
```
v<主版本>.<次版本>.<修订版本>
```

### 5.2 标签命名
- 例如：`v1.0.0`、`v1.0.1`
- 主版本：重大变更，不向后兼容
- 次版本：新功能，向后兼容
- 修订版本：bug 修复，向后兼容

## 6. 其他规范

### 6.1 .gitignore
- 项目根目录应该包含 .gitignore 文件
- 忽略不需要版本控制的文件和目录，如 node_modules、dist、target 等

### 6.2 提交频率
- 保持提交粒度适中，每个提交应该是一个完整的功能或修复
- 避免一次性提交大量修改

### 6.3 代码冲突
- 定期从上游分支拉取最新代码，避免冲突
- 解决冲突时要仔细检查，确保代码逻辑正确

## 7. 示例

### 7.1 示例 Commit 消息
```
feat(auth): 添加登录功能

实现了用户登录功能，包括账号密码验证和 JWT  token 生成

Fixes #123
```

### 7.2 示例分支名称
- 功能分支：`feature/login`
- Bug 修复分支：`bugfix/error-handling`
- 发布分支：`release/1.0.0`
- 热修复分支：`hotfix/security-issue`
